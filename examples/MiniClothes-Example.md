# MiniClothes 项目示例

## 📋 概述
本示例展示了如何将AI协作开发规范应用到实际项目中，MiniClothes是一个iOS AI服装识别应用。

---

## 🎯 项目应用规范实例

### 1. 技术决策记录示例

#### TDR-001: 开发平台选择
**决策**: 选择iOS原生开发而非跨平台方案

**应用Context Engineering**:
```markdown
项目上下文: 
- 目标用户: 20-35岁女性，iOS用户占比70%
- 核心功能: AI服装识别，需要Core ML支持
- 开发资源: 1个iOS开发者，熟悉Swift

技术约束:
- 需要本地AI推理能力
- 相机和图片处理性能要求高
- 小红书风格UI设计

决策理由:
- Core ML提供最佳的本地AI支持
- SwiftUI最适合实现小红书风格界面
- 单平台MVP验证，降低初期复杂度
```

### 2. Context Engineering实践示例

#### AI协作请求示例
```markdown
## 任务: 实现服装AI识别功能

### 📍 项目上下文
- 项目: MiniClothes iOS应用 (Week 2 of MVP)
- 架构: SwiftUI + MVVM + Core ML
- 风格: 小红书风格设计

### 🔧 技术上下文
- 平台: iOS 15+
- 语言: Swift 5.9
- 框架: SwiftUI, Core ML, Vision
- 依赖: 无外部AI API，本地模型优先

### 🏗️ 现有代码结构
```swift
// 现有的数据模型
struct ClothingItem {
    let id: UUID
    let category: ClothingCategory
    let colors: [String]
    let confidence: Double
}

// 现有的管理器
class WardrobeManager: ObservableObject {
    @Published var clothes: [ClothingItem] = []
    
    func processNewImage(_ image: UIImage) {
        // 当前占位实现
    }
}
```

### 🎯 具体需求
- 集成Core ML模型进行服装分类
- 支持7个主要类别：上装、下装、外套、裙装、鞋子、配饰、包包
- 提取主要颜色信息（2-3种主色）
- 置信度评估，低于70%时提示用户
- 处理时间控制在3秒以内

### ✅ 成功标准
- 识别准确率 ≥ 70%
- 平均处理时间 ≤ 3秒
- 内存使用 ≤ 200MB
- 与现有WardrobeManager无缝集成
```

### 3. 三次尝试原则应用示例

#### 问题: Core ML模型加载失败
```markdown
## 问题: 应用启动时Core ML模型无法加载

### 🔄 尝试历史
#### 第1次尝试: 检查模型文件
- 方法: 验证.mlmodel文件完整性和位置
- 结果: 模型文件存在且完整
- 学习: 文件本身没问题，可能是代码加载方式问题

#### 第2次尝试: 检查模型配置
- 方法: 修改MLModelConfiguration设置，尝试不同计算单元
- 结果: 仍然加载失败，错误信息相同
- 学习: 配置问题不是根因，需要检查iOS版本兼容性

#### 第3次尝试: 简化模型加载
- 方法: 使用最简单的模型加载代码，去掉所有配置
- 结果: 成功加载，问题出现在MLModelConfiguration
- 学习: iOS 15.0的MLModelConfiguration API有变化

### 💡 解决方案
发现问题出在MLModelConfiguration的computeUnits设置，iOS 15需要使用.all而不是.cpuAndGPU。

### 📝 经验总结
记录到技术决策文档中，避免团队其他成员遇到同样问题。
```

### 4. 周计划应用示例

#### Week 2 计划实例
```markdown
# Week 2: 衣橱管理 + 基础AI识别

## 🎯 本周目标
实现用户拍摄的照片能够被AI识别并保存到衣橱管理

## 🏗️ 任务分解

### Stage 1: AI识别服务集成 (Day 1-2)
- [ ] Core ML模型选择和集成 (MobileNetV3)
- [ ] 创建ClothingClassifier服务类
- [ ] 实现基础的7类服装识别
- 成功标准: 能够对测试图片进行分类，准确率>60%

### Stage 2: 颜色提取功能 (Day 2-3)
- [ ] 使用Core Image实现主色提取
- [ ] 颜色名称映射 (RGB to 中文颜色名)
- [ ] 集成到识别流程中
- 成功标准: 能够识别出2-3种主要颜色

### Stage 3: 衣橱数据管理完善 (Day 3-4)
- [ ] 完善Core Data数据模型
- [ ] 实现CRUD操作
- [ ] WardrobeManager与AI服务集成
- 成功标准: 识别结果能正确保存和读取

### Stage 4: UI界面实现 (Day 4-5)
- [ ] 衣橱列表瀑布流展示
- [ ] 服装卡片小红书风格设计
- [ ] 搜索和筛选功能
- 成功标准: 用户能够流畅浏览和查找服装
```

### 5. 代码审查应用示例

#### AI生成代码审查记录
```markdown
## 代码审查: ClothingClassifier实现

### 审查信息
- 审查者: 项目负责人
- 审查时间: 2025-08-29 14:30
- 审查范围: ClothingClassifier.swift
- 审查类型: AI代码审查

### 发现问题
#### 严重问题
- 问题1: 缺少错误处理，模型加载失败会导致应用崩溃
  - 位置: `init()` 方法
  - 建议: 添加try-catch和降级方案

#### 一般问题  
- 问题1: 置信度阈值硬编码，应该可配置
  - 位置: 第45行
  - 建议: 将0.7提取为配置常量

#### 改进建议
- 建议1: 添加性能监控，记录识别耗时
- 建议2: 考虑添加缓存机制避免重复识别

### 审查结论
- 有条件通过: 修复严重问题后可合并

### 经验总结
AI生成的代码在错误处理方面经常不够完善，需要重点关注异常情况。
```

---

## 📊 项目成果展示

### 开发效率提升
- **代码生成速度**: AI协助下，基础功能开发速度提升60%
- **问题解决效率**: 三次尝试原则减少了无效尝试时间50%
- **代码质量**: 规范化审查流程，Bug率降低40%

### 团队协作改善
- **上下文共享**: 团队成员对项目技术栈理解更一致
- **决策记录**: 技术决策透明化，减少重复讨论
- **知识积累**: 系统化记录经验，新成员上手时间缩短70%

### 产品质量保证
- **功能完整性**: 每周迭代都有明确的验收标准
- **性能标准**: 量化的性能指标确保用户体验
- **代码质量**: 标准化的审查流程保证代码可维护性

---

## 💡 关键经验总结

### Context Engineering实践心得
1. **分层提供上下文**: 先提供项目全局信息，再深入具体技术细节
2. **保持上下文更新**: 随着项目进展及时更新技术栈和架构信息
3. **模板化常用场景**: 为常见的AI协作场景创建标准化模板

### 三次尝试原则效果
1. **减少无效探索**: 有明确的止损点，避免在问题上耗费过多时间
2. **系统化问题解决**: 从直接解决→换角度→简化问题的递进方式
3. **经验积累机制**: 记录尝试过程，为团队其他成员提供参考

### AI协作开发技巧
1. **先理解再实现**: 让AI先分析问题和设计方案，再写具体代码
2. **增量式开发**: 每次只让AI实现一个小功能，逐步完善
3. **代码必须审查**: 所有AI生成代码都要经过人工审查和测试

---

## 🔄 持续改进记录

### 流程优化
- **Week 1后**: 发现AI生成的UI代码经常不符合小红书风格，增加了UI代码专项审查
- **Week 2后**: Context Engineering模板在实际使用中过于冗长，精简了模板结构
- **Week 3后**: 三次尝试原则在复杂问题上效果显著，推广到整个开发流程

### 工具改进
- 创建了项目专用的上下文快速参考文档
- 建立了常见问题和解决方案的知识库
- 优化了代码审查检查清单，增加了AI代码特有问题

### 团队能力提升
- 团队成员对AI协作开发的理解和应用能力显著提升
- 形成了高效的问题讨论和决策机制
- 建立了持续学习和经验分享的文化

---

## 📈 规范应用效果评估

| 指标 | 应用前 | 应用后 | 改善程度 |
|------|--------|--------|----------|
| 功能开发速度 | 基准 | +60% | 显著提升 |
| 代码质量评分 | 7.2/10 | 8.6/10 | +19% |
| Bug修复时间 | 平均2天 | 平均0.8天 | -60% |
| 团队协作效率 | 基准 | +45% | 显著提升 |
| 知识传承效率 | 基准 | +70% | 显著提升 |

---

*示例文档版本: 1.0*  
*项目周期: 4周 (2025-08-29 至 2025-09-26)*  
*团队规模: 1个开发者 + AI协作*  
*最后更新: 2025-08-29*