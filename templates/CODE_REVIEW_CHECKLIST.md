# 代码审查检查清单

## 🎯 审查目标

本检查清单确保所有代码（特别是AI生成的代码）在合并前达到项目质量标准。

---

## ⚡ 快速审查清单 (5分钟)

### ✅ 基本检查
- [ ] **编译通过**: 代码能正常编译，无语法错误
- [ ] **测试通过**: 相关测试用例全部通过
- [ ] **提交信息**: commit信息清晰描述了变更内容
- [ ] **文件结构**: 新文件放在正确的目录位置

### ✅ 功能正确性
- [ ] **需求对应**: 代码实现与需求描述一致
- [ ] **边界条件**: 处理了空值、边界值等特殊情况
- [ ] **错误处理**: 有适当的异常捕获和错误处理
- [ ] **返回值**: 函数返回值类型和内容正确

---

## 🔍 详细审查清单 (15-20分钟)

### 📋 功能性审查

#### 逻辑正确性
- [ ] **算法正确**: 核心算法逻辑正确无误
- [ ] **数据流**: 数据在函数间正确传递
- [ ] **状态管理**: 对象状态变更逻辑正确
- [ ] **条件判断**: if/else逻辑覆盖所有情况

#### 边界和异常处理
- [ ] **输入验证**: 对输入参数进行有效性检查
- [ ] **空值处理**: 正确处理nil/null/undefined情况
- [ ] **数组边界**: 数组访问不会越界
- [ ] **内存安全**: 无内存泄漏或野指针风险

#### 业务逻辑
- [ ] **业务规则**: 实现符合业务规则和约定
- [ ] **数据一致性**: 保持数据的一致性和完整性
- [ ] **权限检查**: 有必要的权限和安全检查
- [ ] **事务处理**: 数据库操作有适当的事务处理

---

### 🏗️ 架构和设计审查

#### 设计模式和架构
- [ ] **架构一致性**: 遵循项目既定的架构模式 (MVVM/MVC/Clean等)
- [ ] **设计原则**: 遵循SOLID原则
- [ ] **设计模式**: 正确使用设计模式，避免过度设计
- [ ] **模块边界**: 模块职责清晰，耦合度适中

#### 接口设计
- [ ] **接口定义**: 接口设计清晰，职责单一
- [ ] **参数设计**: 函数参数数量合理，类型明确
- [ ] **返回值设计**: 返回值类型和结构合理
- [ ] **异步处理**: 正确使用async/await或回调机制

#### 依赖关系
- [ ] **依赖注入**: 合理使用依赖注入，便于测试
- [ ] **循环依赖**: 无循环依赖问题
- [ ] **第三方依赖**: 第三方库使用合理，版本兼容
- [ ] **平台依赖**: 正确处理平台特定代码

---

### 📝 代码质量审查

#### 可读性
- [ ] **命名规范**: 变量、函数、类命名清晰有意义
- [ ] **代码结构**: 代码结构清晰，逻辑层次分明
- [ ] **注释质量**: 必要的注释准确且有用
- [ ] **代码长度**: 函数和类长度适中 (一般<50行/函数)

#### 可维护性  
- [ ] **代码复用**: 避免重复代码，合理抽取公共部分
- [ ] **魔法数字**: 无硬编码的魔法数字和字符串
- [ ] **配置管理**: 可配置项externalized，不散落在代码中
- [ ] **版本兼容**: 考虑向后兼容性和迁移策略

#### 性能考虑
- [ ] **算法效率**: 算法时间和空间复杂度合理
- [ ] **资源使用**: 合理使用内存，及时释放资源  
- [ ] **数据库查询**: SQL查询效率高，有必要的索引
- [ ] **网络请求**: 网络请求有超时和重试机制

---

### 🛡️ 安全性审查

#### 数据安全
- [ ] **输入过滤**: 所有外部输入都经过验证和过滤
- [ ] **SQL注入**: 使用参数化查询，防止SQL注入
- [ ] **XSS防护**: Web应用有XSS防护措施
- [ ] **敏感信息**: 不在日志或代码中暴露敏感信息

#### 权限和认证
- [ ] **身份验证**: 需要权限的操作都有身份验证
- [ ] **授权检查**: 操作前检查用户权限
- [ ] **会话管理**: 会话超时和安全注销
- [ ] **加密存储**: 敏感数据加密存储

#### 通信安全
- [ ] **HTTPS使用**: 敏感通信使用HTTPS
- [ ] **API安全**: API有适当的认证和限流
- [ ] **数据传输**: 敏感数据传输加密
- [ ] **证书验证**: 正确验证SSL证书

---

### 🧪 测试相关审查

#### 测试覆盖
- [ ] **单元测试**: 核心逻辑有对应的单元测试
- [ ] **集成测试**: 模块间交互有集成测试  
- [ ] **边界测试**: 边界条件有相应测试用例
- [ ] **错误路径**: 异常情况有测试覆盖

#### 测试质量
- [ ] **测试独立性**: 测试之间相互独立
- [ ] **测试数据**: 使用合适的测试数据和mock
- [ ] **断言明确**: 测试断言清晰具体
- [ ] **测试维护**: 测试代码易于理解和维护

---

## 🤖 AI生成代码专项检查

### AI代码特有问题
- [ ] **过度复杂**: AI是否生成了不必要的复杂代码
- [ ] **模式误用**: 设计模式使用是否恰当
- [ ] **框架理解**: 对项目使用框架的理解是否正确
- [ ] **上下文一致**: 代码风格是否与项目其他部分一致

### 业务逻辑验证
- [ ] **需求理解**: AI是否正确理解了业务需求
- [ ] **边缘情况**: 是否考虑了所有边缘情况
- [ ] **用户体验**: 实现是否符合用户体验要求
- [ ] **错误处理**: 错误处理是否用户友好

### 技术债务评估
- [ ] **代码质量**: 是否引入了技术债务
- [ ] **维护成本**: 代码是否易于后续维护
- [ ] **扩展性**: 是否考虑了未来的扩展需求
- [ ] **重构需求**: 是否需要立即重构或优化

---

## 📊 不同类型代码的专项检查

### 🎨 UI代码审查
- [ ] **响应式设计**: 适配不同屏幕尺寸
- [ ] **交互反馈**: 用户操作有明确反馈
- [ ] **加载状态**: 有loading和error状态处理
- [ ] **无障碍性**: 支持accessibility功能

### 🔄 API代码审查  
- [ ] **RESTful设计**: API设计符合REST规范
- [ ] **HTTP状态码**: 正确使用HTTP状态码
- [ ] **请求验证**: 请求参数验证完整
- [ ] **响应格式**: 响应数据格式一致

### 💾 数据库代码审查
- [ ] **查询优化**: SQL查询性能优化
- [ ] **索引使用**: 合理使用数据库索引
- [ ] **事务边界**: 事务范围设置合理
- [ ] **数据一致性**: 维护数据完整性约束

### 📱 移动端代码审查
- [ ] **生命周期**: 正确处理Activity/ViewController生命周期
- [ ] **内存管理**: 避免内存泄漏和强引用循环
- [ ] **电池优化**: 考虑电池消耗和性能影响
- [ ] **离线处理**: 网络异常时的处理策略

---

## ⚠️ 常见问题检查

### 高频问题
- [ ] **空指针**: 检查可能的空指针异常
- [ ] **数组越界**: 数组/列表访问边界检查
- [ ] **并发问题**: 多线程访问共享资源的安全性
- [ ] **资源泄漏**: 文件句柄、网络连接等资源释放

### 性能问题
- [ ] **N+1查询**: 数据库查询是否存在N+1问题
- [ ] **无限循环**: 是否存在可能的无限循环
- [ ] **大对象**: 避免创建不必要的大对象
- [ ] **缓存策略**: 是否需要添加缓存机制

### 安全问题
- [ ] **密码明文**: 密码等敏感信息是否加密
- [ ] **日志泄漏**: 日志中是否包含敏感信息
- [ ] **权限升级**: 是否存在权限提升风险
- [ ] **注入攻击**: 是否防范各类注入攻击

---

## 📋 审查结果记录

### 审查信息
- **审查者**: [姓名]
- **审查时间**: [日期和时间]
- **审查范围**: [文件列表或功能模块]
- **审查类型**: 常规审查 / AI代码审查 / 安全审查

### 发现问题
- **严重问题**: [必须修复才能合并]
  - 问题1: [描述]
  - 问题2: [描述]

- **一般问题**: [建议修复]
  - 问题1: [描述]  
  - 问题2: [描述]

- **改进建议**: [可选优化]
  - 建议1: [描述]
  - 建议2: [描述]

### 审查结论
- [ ] **通过**: 可以直接合并
- [ ] **有条件通过**: 修复严重问题后可合并
- [ ] **不通过**: 需要重大修改后重新提交

### 后续行动
- **开发者**: [需要修复的问题列表]
- **时间要求**: [修复完成时间]
- **再次审查**: 是否需要再次审查

---

## 🔄 持续改进

### 审查效率优化
- **工具辅助**: 使用代码分析工具预检查
- **模板应用**: 根据代码类型选择检查重点
- **经验积累**: 记录常见问题，建立知识库
- **团队分享**: 定期分享审查经验和技巧

### 质量标准迭代
- **标准更新**: 根据项目发展调整质量标准
- **工具升级**: 升级和改进审查工具链
- **流程优化**: 根据团队反馈优化审查流程
- **培训提升**: 提升团队代码审查能力

---

## 🚀 快速参考

### 5分钟快速审查重点
1. ✅ 编译 + 测试通过
2. 🎯 功能逻辑正确
3. 🛡️ 基本安全检查  
4. 📖 代码可读性
5. 🔍 明显的性能问题

### AI代码审查重点
1. 🤖 理解准确性
2. 🏗️ 架构一致性
3. 📋 业务逻辑正确
4. 🔒 安全考虑完整
5. 🧪 测试覆盖充分

### 紧急发布审查重点
1. 🚨 功能正确性
2. 🛡️ 安全问题
3. ⚡ 性能影响
4. 🔄 向后兼容性

---

*检查清单版本: 1.0*  
*最后更新: 2025-08-29*  
*适用范围: 所有代码审查场景*